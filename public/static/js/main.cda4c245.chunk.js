(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{53:function(e,t,a){e.exports=a(66)},58:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),l=a.n(c),i=(a(58),a(16)),s=a(4),u=a(9),o=a.n(u),m=a(17),E=a(2),p=function(e){fetch("/api/requests/prices/minmax").then((function(e){return e.json()})).then((function(t){var a=t.prices;a&&(e({type:"SET_TOTAL_MIN_PRICE",payload:a.min}),e({type:"SET_TOTAL_MAX_PRICE",payload:a.max}))}))},_=function(e){fetch("/api/requests/sizes").then((function(e){return e.json()})).then((function(t){var a=t.storageSizes;e({type:"SET_ALL_STORAGE_SIZES",payload:a.sort((function(e,t){return parseInt(e,10)-parseInt(t,10)}))})}))},b=function(e,t){return e({type:"SET_CURRENT_PAGE",payload:t})},f=function(){var e=Object(m.a)(o.a.mark((function e(t){var a,n,r,c,l,i,s,u,m,E;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.dispatch,n=t.currentPage,r=t.searchTerm,c=t.minPrice,l=t.maxPrice,i=t.storageSizes,s=t.totalRequests,u="q=".concat(r,"&page=").concat(n,"&limit=8"),c&&(u+="&price[gte]=".concat(c)),l&&(u+="&price[lte]=".concat(l)),i.length&&(u+=i.map((function(e){return"&storageSize=".concat(e)})).join("")),e.next=7,fetch("/api/requests?".concat(u));case 7:return m=e.sent,e.next=10,m.json();case 10:E=e.sent,a({type:"SET_TOTAL_RESULTS",payload:E.totalCount}),a({type:"SET_PHONES",payload:E.requests}),s||(a({type:"SET_TOTAL_REQUESTS",payload:E.totalCount}),_(a));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=a(23),d=a(42),h=a.n(d);var O=function(){var e=Object(n.useState)(""),t=Object(v.a)(e,2),a=t[0],c=t[1],l=Object(E.b)();function i(){return(i=Object(m.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),l({type:"SET_SEARCH_TERM",payload:a}),l({type:"SET_CURRENT_PAGE",payload:1});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("form",{onSubmit:function(e){return i.apply(this,arguments)}},r.a.createElement("input",{type:"search",className:"search-bar",placeholder:"Enter Search Term (e.g iPhone x, 128GB, A1)",value:a,onChange:function(e){c(e.currentTarget.value)}}),r.a.createElement("button",{className:"hero__btn btn btn--primary"},"Search ",r.a.createElement(h.a,null)))};var S=function(){var e=Object(E.c)((function(e){return e.totalRequests})),t=Object(E.b)();function a(){return(a=Object(m.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,fetch("/api/requests",{method:"post"});case 3:p(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("section",{className:"hero"},r.a.createElement("div",{className:"container row"},r.a.createElement("div",{className:"hero_text col"},r.a.createElement("h1",{className:"hero__title"},"Shop our latest available stock here"),e?r.a.createElement(O,null):r.a.createElement("form",{onSubmit:function(e){return a.apply(this,arguments)}},r.a.createElement("button",{className:"hero__btn btn btn--primary"},"Add Requests"))),r.a.createElement("div",{className:"hero__img col"},r.a.createElement("img",{src:"img/gadgets.png",alt:"gadgets"}))))};var j=function(e){var t,a=e.name,n=e.storageSize,c=e.grade,l=e.price,i=e.unlocked,s=e.requestType;return r.a.createElement("div",{className:"item"},r.a.createElement("span",{className:"item__grade"},c),r.a.createElement("img",{className:"item__img",src:"img/".concat((t=a.toLowerCase(),t&&t.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((function(e){return e.toLowerCase()})).join("_")),".png"),alt:"iphone xs max"}),r.a.createElement("span",{className:"item__name"},a),r.a.createElement("span",{className:"item__spec"},i?"Unlocked":"Locked"," | ",n),r.a.createElement("span",{className:"item__label"},"Unit price"),r.a.createElement("span",{className:"item__price"},"$",l),r.a.createElement("span",{className:"item__in-stock"},"1500 Available"),r.a.createElement("button",{className:"btn btn--primary"},s))};var g=function(){var e=Object(E.c)((function(e){return e.phones}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"main-content"},e.map((function(e){return r.a.createElement(j,Object.assign({key:e._id},e))})),!e.length&&r.a.createElement("p",null,"No results found")))};var y=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Categories"),r.a.createElement("ul",{className:"nav__list"},r.a.createElement("li",{className:"nav__item"},r.a.createElement(i.b,{className:"nav__link",to:"/"},"iPhone")),r.a.createElement("li",{className:"nav__item"},r.a.createElement(i.b,{className:"nav__link",to:"/"},"All")),r.a.createElement("li",{className:"nav__item"},r.a.createElement(i.b,{className:"nav__link",to:"/"},"Samsung")),r.a.createElement("li",{className:"nav__item"},r.a.createElement(i.b,{className:"nav__link",to:"/"},"iPad")),r.a.createElement("li",{className:"nav__item"},r.a.createElement(i.b,{className:"nav__link",to:"/"},"MacBook")),r.a.createElement("li",{className:"nav__item"},r.a.createElement(i.b,{className:"nav__link",to:"/"},"AirPods"))))},T=a(79);var N=function(){var e=Object(n.useState)(0),t=Object(v.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(0),i=Object(v.a)(l,2),s=i[0],u=i[1],o=Object(E.c)((function(e){return e.totalMinPrice})),m=Object(E.c)((function(e){return e.totalMaxPrice})),p=Object(n.useState)([o,m]),_=Object(v.a)(p,2),b=_[0],f=_[1],d=Object(E.b)();return Object(n.useEffect)((function(){return c(o),u(m),function(){}}),[o,m]),Object(n.useEffect)((function(){return f([a,s]),d({type:"SET_CURRENT_PAGE",payload:1}),d({type:"SET_MIN_PRICE",payload:a}),d({type:"SET_MAX_PRICE",payload:s}),function(){}}),[d,a,s]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{id:"price-filter"},"Price Filter"),r.a.createElement(T.a,{value:b,min:o,max:m,onChange:function(e,t){c(t[0]),u(t[1])},valueLabelDisplay:"auto","aria-labelledby":"price-filter"}),r.a.createElement("div",{className:"price-filter--controls"},r.a.createElement("div",{className:"price-filter"},r.a.createElement("label",{htmlFor:"min",className:"price-filter__label"},"Min"),r.a.createElement("input",{type:"text",id:"min",className:"price-filter__input",value:a,min:o,max:s,onChange:function(e){return c(e.target.value)}})),r.a.createElement("span",{className:"divider"}),r.a.createElement("div",{className:"price-filter"},r.a.createElement("label",{htmlFor:"max",className:"price-filter__label"},"Max"),r.a.createElement("input",{type:"text",id:"max",className:"price-filter__input",value:s,min:a,max:m,onChange:function(e){return u(e.target.value)}}))))},P=a(49);var R=function(){var e=Object(E.c)((function(e){return e.storageSizes})),t=Object(E.c)((function(e){return e.allStorageSizes})),a=Object(E.b)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Storage"),r.a.createElement("form",{onChange:function(t){a({type:"SET_STORAGE_SIZES",payload:t.target.checked?[].concat(Object(P.a)(e),[t.target.value]):e.filter((function(e){return e!==t.target.value}))}),b(a,1)}},t.map((function(e){return r.a.createElement("div",{key:e},r.a.createElement("input",{type:"checkbox",value:e,id:e}),r.a.createElement("label",{htmlFor:e}," ",e))}))))};var x=function(){return r.a.createElement("aside",{className:"sidebar"},r.a.createElement(y,null),r.a.createElement(N,null),r.a.createElement(R,null))};var A=function(){return r.a.createElement("main",null,r.a.createElement("div",{className:"container main"},r.a.createElement(x,null),r.a.createElement(g,null)))},k=a(47),C=a.n(k),M=a(46),I=a.n(M);var L=function(e){var t=e.currentPage,a=Object(E.c)((function(e){return e.totalResults})),n=Math.ceil(a/8),c=[],l=Object(E.b)();function i(e){b(l,parseInt(e.currentTarget.value,10))}function s(e){var a=e===t?"active":"";return r.a.createElement("li",{key:e,className:a},r.a.createElement("button",{className:"btn",value:e,onClick:i},e))}if(n<=5)for(var u=1;u<=n;u+=1)c.push(s(u));else t-1<3?c.push(s(1),s(2),s(3),s(4),r.a.createElement("span",{key:"x"},"..."),s(n)):n-t<3?c.push(s(1),r.a.createElement("span",{key:"x"},"..."),s(n-3),s(n-2),s(n-1),s(n)):c.push(s(1),r.a.createElement("span",{key:"x"},"..."),s(t-1),s(t),s(t+1),r.a.createElement("span",{key:"y"},"..."),s(n));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pagination container row"},r.a.createElement("button",{className:"next__button",value:t-1,onClick:i,disabled:t<=1},r.a.createElement(I.a,null)),r.a.createElement("ul",{className:"row"},c),r.a.createElement("button",{className:"prev__button",value:t+1,onClick:i,disabled:t>=n},r.a.createElement(C.a,null))))};var w=function(){var e=Object(E.c)((function(e){return e.searchTerm})),t=Object(E.c)((function(e){return e.currentPage})),a=Object(E.c)((function(e){return e.storageSizes})),c=Object(E.c)((function(e){return e.minPrice})),l=Object(E.c)((function(e){return e.maxPrice})),i=Object(E.c)((function(e){return e.totalRequests})),s=Object(E.c)((function(e){return e.totalMinPrice})),u=Object(E.c)((function(e){return e.totalMaxPrice})),_=Object(E.b)();return Object(n.useEffect)((function(){function n(){return(n=Object(m.a)(o.a.mark((function n(){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s&&u||p(_),n.next=3,f({dispatch:_,currentPage:t,searchTerm:e,minPrice:c,maxPrice:l,storageSizes:a,totalRequests:i});case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return function(){n.apply(this,arguments)}(),function(){}}),[_,t,e,c,l,a,i,s,u]),r.a.createElement(r.a.Fragment,null,r.a.createElement(S,null),r.a.createElement(A,null),r.a.createElement(L,{currentPage:t}))};var z=function(){return r.a.createElement(i.a,null,r.a.createElement(s.a,{path:"/",exact:!0,component:w}),r.a.createElement("footer",{className:"footer"},r.a.createElement("div",{className:"container"},"Copyright \xa9 Lord Uche 2020")))},q=a(25),U=a(48),F=a(3),G={phones:[],searchTerm:"",currentPage:1,storageSizes:[],allStorageSizes:[],totalRequests:0,totalResults:0,totalMinPrice:0,totalMaxPrice:0};var Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PHONES":return Object(F.a)(Object(F.a)({},e),{},{phones:t.payload});case"SET_SEARCH_TERM":return Object(F.a)(Object(F.a)({},e),{},{searchTerm:t.payload});case"SET_CURRENT_PAGE":return Object(F.a)(Object(F.a)({},e),{},{currentPage:t.payload});case"SET_MIN_PRICE":return Object(F.a)(Object(F.a)({},e),{},{minPrice:t.payload});case"SET_MAX_PRICE":return Object(F.a)(Object(F.a)({},e),{},{maxPrice:t.payload});case"SET_TOTAL_MIN_PRICE":return Object(F.a)(Object(F.a)({},e),{},{totalMinPrice:t.payload});case"SET_TOTAL_MAX_PRICE":return Object(F.a)(Object(F.a)({},e),{},{totalMaxPrice:t.payload});case"SET_STORAGE_SIZES":return Object(F.a)(Object(F.a)({},e),{},{storageSizes:t.payload});case"SET_ALL_STORAGE_SIZES":return Object(F.a)(Object(F.a)({},e),{},{allStorageSizes:t.payload});case"SET_TOTAL_RESULTS":return Object(F.a)(Object(F.a)({},e),{},{totalResults:t.payload});case"SET_TOTAL_REQUESTS":return Object(F.a)(Object(F.a)({},e),{},{totalRequests:t.payload});default:return e}},H=Object(q.c)(Z,Object(q.a)(U.a));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(E.a,{store:H},r.a.createElement(z,null))),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.cda4c245.chunk.js.map