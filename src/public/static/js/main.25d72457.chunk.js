(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{52:function(e,t,a){e.exports=a(65)},57:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),l=a.n(c),i=(a(57),a(17)),s=a(3),o=a(16),u=a.n(o),m=a(20),E=a(13),p=a(2),_=a(42),b=a.n(_);var f=function(){var e=Object(n.useState)(""),t=Object(E.a)(e,2),a=t[0],c=t[1],l=Object(p.b)();function i(){return(i=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),l({type:"SET_SEARCH_TERM",payload:a}),l({type:"SET_CURRENT_PAGE",payload:1});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("form",{onSubmit:function(e){return i.apply(this,arguments)}},r.a.createElement("input",{type:"search",className:"search-bar",placeholder:"Enter Search Term (e.g iPhone x, 128GB, A1)",value:a,onChange:function(e){c(e.currentTarget.value)}}),r.a.createElement("button",{className:"hero__btn btn btn--primary"},"Search ",r.a.createElement(b.a,null)))};var v=function(e){var t=e.showSearch,a=Object(p.b)();function n(){return(n=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/requests",{method:"post"});case 2:fetch("/api/requests/prices/minmax").then((function(e){return e.json()})).then((function(e){var t=e.prices;t&&(a({type:"SET_TOTAL_MIN_PRICE",payload:t.min}),a({type:"SET_TOTAL_MAX_PRICE",payload:t.max}))}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("section",{className:"hero"},r.a.createElement("div",{className:"container row"},r.a.createElement("div",{className:"hero_text col"},r.a.createElement("h1",{className:"hero__title"},"Shop our latest available stock here"),t?r.a.createElement(f,null):r.a.createElement("button",{onClick:function(e){return n.apply(this,arguments)},className:"hero__btn btn btn--primary"},"Add Requests")),r.a.createElement("div",{className:"hero__img col"},r.a.createElement("img",{src:"img/gadgets.png",alt:"gadgets"}))))};var h=function(e){var t,a=e.name,n=e.storageSize,c=e.grade,l=e.price,i=e.unlocked,s=e.requestType;return r.a.createElement("div",{className:"item"},r.a.createElement("span",{className:"item__grade"},c),r.a.createElement("img",{className:"item__img",src:"img/".concat((t=a.toLowerCase(),t&&t.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map((function(e){return e.toLowerCase()})).join("_")),".png"),alt:"iphone xs max"}),r.a.createElement("span",{className:"item__name"},a),r.a.createElement("span",{className:"item__spec"},i?"Unlocked":"Locked"," | ",n),r.a.createElement("span",{className:"item__label"},"Unit price"),r.a.createElement("span",{className:"item__price"},"$",l),r.a.createElement("span",{className:"item__in-stock"},"1500 Available"),r.a.createElement("button",{className:"btn btn--primary"},s))};var d=function(){var e=Object(p.c)((function(e){return e.phones}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"main-content"},e.map((function(e){return r.a.createElement(h,Object.assign({key:e._id},e))})),!e.length&&r.a.createElement("p",null,"No results found")))};var O=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Categories"),r.a.createElement("ul",{className:"nav__list"},r.a.createElement("li",{className:"nav__item"},r.a.createElement(i.b,{className:"nav__link",to:"/"},"iPhone")),r.a.createElement("li",{className:"nav__item"},r.a.createElement(i.b,{className:"nav__link",to:"/"},"All")),r.a.createElement("li",{className:"nav__item"},r.a.createElement(i.b,{className:"nav__link",to:"/"},"Samsung")),r.a.createElement("li",{className:"nav__item"},r.a.createElement(i.b,{className:"nav__link",to:"/"},"iPad")),r.a.createElement("li",{className:"nav__item"},r.a.createElement(i.b,{className:"nav__link",to:"/"},"MacBook")),r.a.createElement("li",{className:"nav__item"},r.a.createElement(i.b,{className:"nav__link",to:"/"},"AirPods"))))},g=a(78);var N=function(){var e=Object(n.useState)(0),t=Object(E.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(0),i=Object(E.a)(l,2),s=i[0],o=i[1],u=Object(p.c)((function(e){return e.totalMinPrice})),m=Object(p.c)((function(e){return e.totalMaxPrice})),_=Object(n.useState)([u,m]),b=Object(E.a)(_,2),f=b[0],v=b[1],h=Object(p.b)();return Object(n.useEffect)((function(){return c(u),o(m),function(){}}),[u,m]),Object(n.useEffect)((function(){return v([a,s]),h({type:"SET_CURRENT_PAGE",payload:1}),h({type:"SET_MIN_PRICE",payload:a}),h({type:"SET_MAX_PRICE",payload:s}),function(){}}),[h,a,s]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{id:"price-filter"},"Price Filter"),r.a.createElement(g.a,{value:f,min:u,max:m,onChange:function(e,t){c(t[0]),o(t[1])},valueLabelDisplay:"auto","aria-labelledby":"price-filter"}),r.a.createElement("div",{className:"price-filter--controls"},r.a.createElement("div",{className:"price-filter"},r.a.createElement("label",{htmlFor:"min",className:"price-filter__label"},"Min"),r.a.createElement("input",{type:"text",id:"min",className:"price-filter__input",value:a,min:u,max:s,onChange:function(e){return c(e.target.value)}})),r.a.createElement("span",{className:"divider"}),r.a.createElement("div",{className:"price-filter"},r.a.createElement("label",{htmlFor:"max",className:"price-filter__label"},"Max"),r.a.createElement("input",{type:"text",id:"max",className:"price-filter__input",value:s,min:a,max:m,onChange:function(e){return o(e.target.value)}}))))},j=a(48);var y=function(){var e=Object(n.useState)([]),t=Object(E.a)(e,2),a=t[0],c=t[1],l=Object(p.c)((function(e){return e.storageSizes})),i=Object(p.b)();return Object(n.useEffect)((function(){return fetch("/api/requests/sizes").then((function(e){return e.json()})).then((function(e){var t=e.storageSizes;c(t.sort((function(e,t){return parseInt(e,10)-parseInt(t,10)})))})),function(){}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Storage"),r.a.createElement("form",{onChange:function(e){i({type:"SET_STORAGE_SIZES",payload:e.target.checked?[].concat(Object(j.a)(l),[e.target.value]):l.filter((function(t){return t!==e.target.value}))})}},a.map((function(e){return r.a.createElement("div",{key:e},r.a.createElement("input",{type:"checkbox",value:e,id:e}),r.a.createElement("label",{htmlFor:e}," ",e))}))))};var S=function(){return r.a.createElement("aside",{className:"sidebar"},r.a.createElement(O,null),r.a.createElement(N,null),r.a.createElement(y,null))};var T=function(){return r.a.createElement("main",null,r.a.createElement("div",{className:"container main"},r.a.createElement(S,null),r.a.createElement(d,null)))},P=a(47),x=a.n(P),C=a(46),k=a.n(C);var A=function(e){var t=e.totalPages,a=e.currentPage,n=e.setCurrentPage,c=[];function l(e){n(parseInt(e.currentTarget.value,10))}function i(e){var t=e===a?"active":"";return r.a.createElement("li",{key:e,className:t},r.a.createElement("button",{className:"btn",value:e,onClick:l},e))}if(t<=5)for(var s=1;s<=t;s+=1)c.push(i(s));else a-1<3?c.push(i(1),i(2),i(3),i(4),r.a.createElement("span",{key:"x"},"..."),i(t)):t-a<3?c.push(i(1),r.a.createElement("span",{key:"x"},"..."),i(t-3),i(t-2),i(t-1),i(t)):c.push(i(1),r.a.createElement("span",{key:"x"},"..."),i(a-1),i(a),i(a+1),r.a.createElement("span",{key:"y"},"..."),i(t));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pagination container row"},r.a.createElement("button",{className:"next__button",value:a-1,onClick:l,disabled:a<=1},r.a.createElement(k.a,null)),r.a.createElement("ul",{className:"row"},c),r.a.createElement("button",{className:"prev__button",value:a+1,onClick:l,disabled:a>=t},r.a.createElement(x.a,null))))};var M=function(){var e=Object(n.useState)(0),t=Object(E.a)(e,2),a=t[0],c=t[1],l=Object(p.c)((function(e){return e.searchTerm})),i=Object(p.c)((function(e){return e.currentPage})),s=Object(p.c)((function(e){return e.storageSizes})),o=Object(p.c)((function(e){return e.minPrice})),_=Object(p.c)((function(e){return e.maxPrice})),b=Object(p.c)((function(e){return e.totalMinPrice})),f=Object(p.c)((function(e){return e.totalMaxPrice})),h=Object(p.b)();return Object(n.useEffect)((function(){function e(){return(e=Object(m.a)(u.a.mark((function e(){var t,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b&&f||fetch("/api/requests/prices/minmax").then((function(e){return e.json()})).then((function(e){var t=e.prices;t&&(h({type:"SET_TOTAL_MIN_PRICE",payload:t.min}),h({type:"SET_TOTAL_MAX_PRICE",payload:t.max}))})),t="q=".concat(l,"&page=").concat(i),o&&(t+="&price[gte]=".concat(o)),_&&(t+="&price[lte]=".concat(_)),s.length&&(t+=s.map((function(e){return"&storageSize=".concat(e)})).join("")),e.next=7,fetch("/api/requests?".concat(t));case 7:return a=e.sent,e.next=10,a.json();case 10:n=e.sent,c(n.totalCount),h({type:"SET_PHONES",payload:n.requests});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){}}),[h,i,l,o,_,s,b,f]),r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{showSearch:!!a}),r.a.createElement(T,null),r.a.createElement(A,{totalPages:Math.floor(a/20),currentPage:i,setCurrentPage:function(e){h({type:"SET_CURRENT_PAGE",payload:e})}}))};var R=function(){return r.a.createElement(i.a,null,r.a.createElement(s.a,{path:"/",exact:!0,component:M}),r.a.createElement("footer",{className:"footer"},r.a.createElement("div",{className:"container"},"Copyright \xa9 Lord Uche 2020")))},I=a(30),w=a(6),L={phones:[],searchTerm:"",currentPage:1,storageSizes:[],totalMinPrice:0,totalMaxPrice:0};var z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PHONES":return Object(w.a)(Object(w.a)({},e),{},{phones:t.payload});case"SET_SEARCH_TERM":return Object(w.a)(Object(w.a)({},e),{},{searchTerm:t.payload});case"SET_CURRENT_PAGE":return Object(w.a)(Object(w.a)({},e),{},{currentPage:t.payload});case"SET_MIN_PRICE":return Object(w.a)(Object(w.a)({},e),{},{minPrice:t.payload});case"SET_MAX_PRICE":return Object(w.a)(Object(w.a)({},e),{},{maxPrice:t.payload});case"SET_TOTAL_MIN_PRICE":return Object(w.a)(Object(w.a)({},e),{},{totalMinPrice:t.payload});case"SET_TOTAL_MAX_PRICE":return Object(w.a)(Object(w.a)({},e),{},{totalMaxPrice:t.payload});case"SET_STORAGE_SIZES":return Object(w.a)(Object(w.a)({},e),{},{storageSizes:t.payload});default:return e}},F=Object(I.b)(z);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(p.a,{store:F},r.a.createElement(R,null))),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.25d72457.chunk.js.map